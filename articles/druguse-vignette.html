<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>pkg.druguse Vignette: Classification of Age Groups Based on Drug Use Patterns • pkg.drugage</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="pkg.druguse Vignette: Classification of Age Groups Based on Drug Use Patterns">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pkg.drugage</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/DSCI-310-2025/pkg.drugage.git">GitHub</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/DSCI-310-2025/pkg.drugage/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>pkg.druguse Vignette: Classification of Age Groups Based on Drug Use Patterns</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DSCI-310-2025/pkg.drugage/blob/master/vignettes/druguse-vignette.Rmd" class="external-link"><code>vignettes/druguse-vignette.Rmd</code></a></small>
      <div class="d-none name"><code>druguse-vignette.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://DSCI-310-2025.github.io/pkg.drugage">pkg.drugage</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>pkg.druguse</code> package provides tools to streamline the
process of binary classification based on drug use/frequency trends. It
provides modular functions for: - Data Downloading and Preparation:
Obtaining the data from its original source and saving it to the project
repository - Data Cleaning and Transformation: Preparing the data for
analysis - Exploratory Data Analysis (EDA): Visualizations of
pre-processed data - Model Training and Prediction: Trials with decision
tree, KNN regression and logistic regression models to find the most
appropriate way of analyzing our data - Model evaluation via confusion
matrices: Methodology to test how well our models are able to perform
binary classification on test data given the training data</p>
<p>This vignette demonstrates the workflow using the <em>Drug Use by
Age</em> dataset, where we: 1. Converted character -&gt; numeric columns
so that the data could be analyzed, and aggregated the groups to expand
on the dataset (as it was quite small) 2. Used age as a binary target;
individuals would be categorized either as youth or adult</p>
<div class="section level3">
<h3 id="read-data">Read Data<a class="anchor" aria-label="anchor" href="#read-data"></a>
</h3>
<p>We downloaded the dataset by retrieving it from a URL, and saving it
locally in the <code>data/raw/</code> directory.</p>
<pre><code><span><span class="co">#&gt; File downloaded successfully to data/raw/</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="data-cleaning-transformation">Data Cleaning &amp; Transformation<a class="anchor" aria-label="anchor" href="#data-cleaning-transformation"></a>
</h3>
<p>The dataset underwent preprocessing steps using two vital functions:
- <code><a href="../reference/clean_drug_use_data.html">clean_drug_use_data()</a></code> - standardizes variable types and
handles missing values - <code><a href="../reference/classify_age_group.html">classify_age_group()</a></code> - adds a
‘youth’/‘adult’ classification via an additional column; youth being ≤
20 and adults being &gt; 20.</p>
<pre><code><span><span class="co">#&gt; Warning: There was 1 warning in `dplyr::mutate()`.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> In argument: `age_numeric = as.numeric(as.character(age))`.</span></span>
<span><span class="co">#&gt; Caused by warning:</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> NAs introduced by coercion</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="eda">EDA<a class="anchor" aria-label="anchor" href="#eda"></a>
</h3>
<p>Since we aim to predict age category using drug use patterns, we
performed some exploratory data analysis (EDA) to gain a better
understanding of our dataset. Insights into drug use patterns were
visualized using our bar and scatter plot functions:</p>
<pre><code><span><span class="co">#&gt; Warning: Removed 1 row containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_bar()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 1 row containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_text()`).</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span>
<span><span class="co">#&gt; Warning: Removed 1 row containing non-finite outside the scale range</span></span>
<span><span class="co">#&gt; (`stat_smooth()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 1 row containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_point()`).</span></span></code></pre>
<p>To compare drug use across age groups, we aggregate the data:</p>
</div>
<div class="section level3">
<h3 id="analysis">Analysis<a class="anchor" aria-label="anchor" href="#analysis"></a>
</h3>
<p>First, since we are doing prediction, we did a train/test split on
our data. This way, we can test and compare our models’ ability to
predict accurately.</p>
<p>We chose to run three different models on our data:</p>
<ol style="list-style-type: decimal">
<li>A Decision tree model</li>
<li>K-Nearest-Neighbors (KNN) Regression</li>
<li>Logistic Regression</li>
</ol>
<pre><code><span><span class="co">#&gt; Warning in predict.lm(object, newdata, se.fit, scale = 1, type = if (type == :</span></span>
<span><span class="co">#&gt; prediction from rank-deficient fit; attr(*, "non-estim") has doubtful cases</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>The <code>pkg.druguse</code> package is a lightweight toolset for
building classification models, particularly in social science and
public health contexts involving behavioral data. It has been designed
to simplify the steps in binary classification, from EDA and
preprocessing to model training and evaluation. This vignette
demonstrates its capabilities using the <em>Drug Use by Age</em>
dataset, but the package can be extended to real-world classification
tasks.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nazia Edroos.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
